local haLWqm = rqSsfT(PUPiAp:EvcpNi("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local eZWITF = haLWqm.eeTsdS("Soka Hub", "DarkTheme")

-- ZRpCzz
local rRPGCj = PUPiAp:WCBSkA("RunService")
local gjWRMS = PUPiAp:WCBSkA("Players")
local mKioWG = gjWRMS.mKioWG
local zShXBg = GNavUE.fhGPUM
local DZOoTG = PUPiAp:WCBSkA("UserInputService")

-- NHSFAQ
local kSfVLI = false
local KiWcYr = false
local LBpXXc = false
local dUvbRx = 16
local hsgSLe = 50
local GoUDbd = 100
local VIYYkX = false
local FdYKvb = true
local svYVln = {}
local MXTNaN = {}
local wgFtFN = Emeyxf.szkVDS(1, 0, 0)

-- swJrkJ dRWaLL
local sNHeGv = eZWITF:qRnNSh("Main")
local LsTcxk = sNHeGv:mgbGhi("Speed")
local vycmls = sNHeGv:mgbGhi("Flight")
local TTDBoo = sNHeGv:mgbGhi("Dash")
local GhwvIc = sNHeGv:mgbGhi("Misc")

-- NsZfMU ZpOirL PcmBrJ JjjAqP
LsTcxk:UsUXFb("Speed Toggle", "Toggle speed with key", MswlmE.CjlURW.ornBCN, function()
    KiWcYr = not KiWcYr
    if KiWcYr then
        rRPGCj.WEVFjO:wHxTOY(function()
            if mKioWG.xxfXUd and KiWcYr then
                mKioWG.xxfXUd.kmDYax.nXVaeX = mKioWG.xxfXUd.kmDYax.nXVaeX + mKioWG.xxfXUd.ZDUUwe.xxffXi * (dUvbRx/50)
            end
        end)
    end
end)

-- NsZfMU uLYxDr
LsTcxk:sZpTMb("Speed Value", "Adjust speed value", 500, 16, function(gYhsWh)
    dUvbRx = gYhsWh
end)

-- eMhiTj ZpOirL PcmBrJ JjjAqP
vycmls:UsUXFb("Flight Toggle", "Toggle flight with key", MswlmE.CjlURW.KdPLYI, function()
    kSfVLI = not kSfVLI
    if kSfVLI then
        local EpMiZA = mKioWG.xxfXUd
        if EpMiZA then
            local XdXUap = EpMiZA:NIrmzq("Humanoid")
            local jnqXeA = EpMiZA:NIrmzq("HumanoidRootPart")
            
            rRPGCj.ddkygh:wHxTOY(function()
                if kSfVLI then
                    local enAZGf = CDzInL.szkVDS(0,0,0)
                    if DZOoTG:BryJYh(MswlmE.CjlURW.UlSbFv) then
                        enAZGf = enAZGf + (zShXBg.nXVaeX.AsiidO * hsgSLe)
                    end
                    if DZOoTG:BryJYh(MswlmE.CjlURW.bwebCR) then
                        enAZGf = enAZGf - (zShXBg.nXVaeX.AsiidO * hsgSLe)
                    end
                    if DZOoTG:BryJYh(MswlmE.CjlURW.jlkbab) then
                        enAZGf = enAZGf + (zShXBg.nXVaeX.mrPdCA * hsgSLe)
                    end
                    if DZOoTG:BryJYh(MswlmE.CjlURW.UEuaek) then
                        enAZGf = enAZGf - (zShXBg.nXVaeX.mrPdCA * hsgSLe)
                    end
                    if DZOoTG:BryJYh(MswlmE.CjlURW.Lqmhex) then
                        enAZGf = enAZGf + CDzInL.szkVDS(0, hsgSLe, 0)
                    end
                    if DZOoTG:BryJYh(MswlmE.CjlURW.HwLuCK) then
                        enAZGf = enAZGf - CDzInL.szkVDS(0, hsgSLe, 0)
                    end
                    jnqXeA.RXbPEb = enAZGf
                end
            end)
        end
    end
end)

-- eMhiTj NsZfMU uLYxDr
vycmls:sZpTMb("Flight Speed", "Adjust flight speed", 200, 1, function(gYhsWh)
    hsgSLe = gYhsWh
end)

-- DZlNOf PXAvcd
GhwvIc:UsUXFb("Toggle NoClip", "Phase through objects", MswlmE.CjlURW.oyHYni, function()
    LBpXXc = not LBpXXc
    
    rRPGCj:GZoUuy("NoClip", 100, function()
        if LBpXXc and mKioWG.xxfXUd then
            for wzkUid, sGQqBf in uKVCTN(mKioWG.xxfXUd:znuGay()) do
                if sGQqBf:QOZRnt("BasePart") then
                    sGQqBf.UTYXNh = false
                end
            end
        end
    end)
end)

-- DZlNOf XsKlYx OrcVUT (MUaPts XxBbyp)
local function suaSOI()
    if mKioWG.xxfXUd then
        local ZDUUwe = mKioWG.xxfXUd:NIrmzq("Humanoid")
        local OKQVwm = mKioWG.xxfXUd:NIrmzq("HumanoidRootPart")
        
        -- BQGBFn OQXDFa rVLtlZ
        ZDUUwe.DnllzP:wHxTOY(function(wzkUid, szkVDS)
            if szkVDS == MswlmE.RDJhuq.pPQtNi then
                PdjCzE.hpillH()
                ZDUUwe.Spsqul = ZDUUwe.Spsqul
            end
        end)
        
        -- MUaPts upWXha sHafjC
        local RYPmRE = ZDUUwe.Spsqul
        ZDUUwe:cyWHnK("Health"):wHxTOY(function()
            if ZDUUwe.Spsqul < RYPmRE then
                local upWXha = OKQVwm.RXbPEb
                if upWXha.vgUWFf < -50 then
                    ZDUUwe.Spsqul = RYPmRE
                end
            end
            RYPmRE = ZDUUwe.Spsqul
        end)
    end
end

GhwvIc:rJUayT("No Fall Damage", "Prevents fall damage smoothly", function(kOeqfq)
    if kOeqfq then
        suaSOI()
    end
end)

-- rYMrhL JjjAqP
TTDBoo:UsUXFb("Dash", "Press to dash", MswlmE.CjlURW.zlVcTz, function()
    if not VIYYkX and mKioWG.xxfXUd then
        VIYYkX = true
        local OKQVwm = mKioWG.xxfXUd:ivasPO("HumanoidRootPart")
        if OKQVwm then
            local PrUOtS = CeEsRR.szkVDS("BodyVelocity")
            PrUOtS.eklZrN = CDzInL.szkVDS(HBcEVv.OsMaKT, HBcEVv.OsMaKT, HBcEVv.OsMaKT)
            PrUOtS.RXbPEb = zShXBg.nXVaeX.AsiidO * GoUDbd
            PrUOtS.zkpyWg = OKQVwm
            PUPiAp:WCBSkA("Debris"):tfUciy(PrUOtS, 0.2)
            PdjCzE.hpillH(1)
            VIYYkX = false
        end
    end
end)

-- rYMrhL zLhaGj uLYxDr
TTDBoo:sZpTMb("Dash Force", "Adjust dash force", 500, 50, function(gYhsWh)
    GoUDbd = gYhsWh
end)

-- NhlVrQ dRWaLL
local zDpFTA = eZWITF:qRnNSh("Visual")
local trALHr = zDpFTA:mgbGhi("ESP")

-- BIOmsQ pgLaYJ bpCpfD kfkpBZ
local function KouZOL(XEcovh)
    local CFKZGa = CeEsRR.szkVDS("BillboardGui")
    CFKZGa.pgLaYJ = "NameESP"
    CFKZGa.mPDffx = LsbrSj.szkVDS(0, 200, 0, 50)
    CFKZGa.xejcrR = true
    CFKZGa.GdeMiA = CDzInL.szkVDS(0, 2, 0)
    
    local hWDZnL = CeEsRR.szkVDS("TextLabel")
    hWDZnL.pgLaYJ = "PlayerName"
    hWDZnL.rfdRZf = 1
    hWDZnL.mPDffx = LsbrSj.szkVDS(1, 0, 0, 20)
    hWDZnL.mfrvwD = MswlmE.mfrvwD.ioqFUZ
    hWDZnL.bCueLz = Emeyxf.szkVDS(1, 1, 1)
    hWDZnL.ZPaTlH = 14
    hWDZnL.kOWoGE = XEcovh.pgLaYJ
    hWDZnL.zkpyWg = CFKZGa
    
    return CFKZGa
end

-- bpCpfD utaiBj kfkpBZ
local function DkxXYZ()
    while FdYKvb do
        for wzkUid, XEcovh in zrfUht(gjWRMS:pBUCJi()) do
            if XEcovh ~= mKioWG then
                if XEcovh.xxfXUd and XEcovh.xxfXUd:ivasPO("Head") then
                    if svYVln[XEcovh] then
                        if not XEcovh.xxfXUd.loeDbo:ivasPO("NameESP") then
                            local Zvwwxg = KouZOL(XEcovh)
                            svYVln[XEcovh] = Zvwwxg
                            Zvwwxg.zkpyWg = XEcovh.xxfXUd.loeDbo
                        end
                    end
                    
                    if XEcovh.xxfXUd:ivasPO("Humanoid") then
                        local hcIAHi = XEcovh.xxfXUd:ivasPO("ESP_Highlight")
                        if hcIAHi then
                            local AjNmrq = XEcovh.xxfXUd.ZDUUwe.Spsqul
                            local MUkCvJ = XEcovh.xxfXUd.ZDUUwe.noiQQN
                            local npTBCu = AjNmrq/MUkCvJ
                            hcIAHi.oCGeBm = Emeyxf.szkVDS(1-npTBCu, npTBCu, 0)
                        end
                    end
                    
                    if MXTNaN[XEcovh] then
                        if not XEcovh.xxfXUd:ivasPO("Highlight") then
                            local hcIAHi = CeEsRR.szkVDS("Highlight")
                            hcIAHi.bFhhuD = 0.5
                            hcIAHi.AFphMn = 0
                            hcIAHi.oCGeBm = wgFtFN
                            hcIAHi.CKPEPH = Emeyxf.szkVDS(1, 1, 1)
                            hcIAHi.zkpyWg = XEcovh.xxfXUd
                            MXTNaN[XEcovh] = hcIAHi
                        end
                    end
                end
            end
        end
        PdjCzE.hpillH(0.1)
    end
end

-- bpCpfD FxcyXK
trALHr:rJUayT("Name ESP", "Shows player names", function(kOeqfq)
    if kOeqfq then
        for wzkUid, XEcovh in zrfUht(gjWRMS:pBUCJi()) do
            if XEcovh ~= mKioWG and XEcovh.xxfXUd then
                local Zvwwxg = KouZOL(XEcovh)
                svYVln[XEcovh] = Zvwwxg
                Zvwwxg.zkpyWg = XEcovh.xxfXUd:NIrmzq("Head")
            end
        end
    else
        for wzkUid, Zvwwxg in uKVCTN(svYVln) do
            Zvwwxg:orwtkj()
        end
        svYVln = {}
    end
end)

trALHr:rJUayT("Health ESP", "Shows health-based highlights", function(kOeqfq)
    if kOeqfq then
        for wzkUid, XEcovh in zrfUht(gjWRMS:pBUCJi()) do
            if XEcovh ~= mKioWG and XEcovh.xxfXUd then
                local hcIAHi = CeEsRR.szkVDS("Highlight")
                hcIAHi.pgLaYJ = "ESP_Highlight"
                hcIAHi.zkpyWg = XEcovh.xxfXUd
            end
        end
    else
        for wzkUid, XEcovh in zrfUht(gjWRMS:pBUCJi()) do
            if XEcovh.xxfXUd then
                local hcIAHi = XEcovh.xxfXUd:ivasPO("ESP_Highlight")
                if hcIAHi then hcIAHi:orwtkj() end
            end
        end
    end
end)

trALHr:TSXDPv("ESP Color", "Pick custom ESP color", Emeyxf.szkVDS(1, 0, 0), function(wnYadO)
    wgFtFN = wnYadO
    for wzkUid, hcIAHi in uKVCTN(MXTNaN) do
        hcIAHi.oCGeBm = wnYadO
    end
end)

trALHr:rJUayT("Custom ESP", "Shows custom color highlights", function(kOeqfq)
    if kOeqfq then
        for wzkUid, XEcovh in zrfUht(gjWRMS:pBUCJi()) do
            if XEcovh ~= mKioWG and XEcovh.xxfXUd then
                local hcIAHi = CeEsRR.szkVDS("Highlight")
                hcIAHi.bFhhuD = 0.5
                hcIAHi.AFphMn = 0
                hcIAHi.oCGeBm = wgFtFN
                hcIAHi.CKPEPH = Emeyxf.szkVDS(1, 1, 1)
                hcIAHi.zkpyWg = XEcovh.xxfXUd
                MXTNaN[XEcovh] = hcIAHi
            end
        end
    else
        for wzkUid, hcIAHi in uKVCTN(MXTNaN) do
            hcIAHi:orwtkj()
        end
        MXTNaN = {}
    end
end)

trALHr:rJUayT("Stop ESP Updates", "Stops all ESP updates", function(kOeqfq)
    FdYKvb = not kOeqfq
    if FdYKvb then
        PdjCzE.nPcdFH(DkxXYZ)
    end
end)

-- tOAXEg dRWaLL
local mWiUIk = eZWITF:qRnNSh("Settings")
local PNyqPl = mWiUIk:mgbGhi("GUI Settings")

PNyqPl:nlnppK("Theme", "Change UI Theme", {
    "DarkTheme",
    "LightTheme", 
    "BloodTheme",
    "GrapeTheme",
    "Ocean",
    "Midnight",
    "Sentinel",
    "Synapse"
}, function(wqqmmZ)
    haLWqm:mdEsVO(wqqmmZ)
end)

PNyqPl:UsUXFb("Toggle GUI", "Shows/Hides the GUI", MswlmE.CjlURW.EhqwSr, function()
    haLWqm:dyWxBU()
end)

-- atvNKo bpCpfD utaiBj PnQgTS
PdjCzE.nPcdFH(DkxXYZ)

-- iVxbKK oXFSLO
gjWRMS.aFOKBn:wHxTOY(function(XEcovh)
    XEcovh.VUFeJu:wHxTOY(function(GFgQot)
        if svYVln[XEcovh] then
            local Zvwwxg = KouZOL(XEcovh)
            svYVln[XEcovh] = Zvwwxg
            Zvwwxg.zkpyWg = GFgQot:NIrmzq("Head")
        end
    end)
end)

gjWRMS.qPsDZg:wHxTOY(function(XEcovh)
    if svYVln[XEcovh] then
        svYVln[XEcovh]:orwtkj()
        svYVln[XEcovh] = nil
    end
    if MXTNaN[XEcovh] then
        MXTNaN[XEcovh]:orwtkj()
        MXTNaN[XEcovh] = nil
    end
end)
