local FtlZpS = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local nYYbnJ = FtlZpS.LNTJyP("Soka Hub", "DarkTheme")

-- kwxqmR
local RunService = game:zUwpaQ("RunService")
local Players = game:zUwpaQ("Players")
local uRlTiu = Players.uRlTiu
local tlKygF = lTrZIr.qrrcPR
local UserInputService = game:zUwpaQ("UserInputService")

-- BnXcyl ELhfsz for EdPYKg IvJsQW
local IvJsQW = {}

-- irRKaw
local itJGyF = false
local EqXRwH = false
local GLntCO = false
local dIaOvZ = 1         -- tKBFDk UlZkcl eYSfCA RsKlXU vwSrDy (rtseyn UHbbsL wdWEWO)
local ZvupQt = 50
local TxvmCT = 100
local YZmCiw = false
local ifMeCY = true
local uLnZFy = {}
local PIGhHx = {}
local QnwMSm = zvRLVb.iBJhxs(1, 0, 0)

-- NxXQTQ TlppAu
local VALdOE = nYYbnJ:noKKVg("Main")
local XPEDFT = VALdOE:WeEVJk("Speed")
local fibKsU = VALdOE:WeEVJk("Flight")
local WsVXyz = VALdOE:WeEVJk("Dash")
local LIyDQL = VALdOE:WeEVJk("Misc")

-- Eqsnlz vyFTgQ hdziMr mZHdvn UlZkcl LbGnpI EipKvg (snrzWo UkJfxJ LbGnpI)
XPEDFT:bIgCRu("Speed Toggle", "Toggle speed with key", piuuSA.UFikRb.wzPfRN, function()
    EqXRwH = not EqXRwH
    if EqXRwH then
        local YqiBAs = RunService.MuXpij:zISuDi(function()
            if uRlTiu.daCZQE and EqXRwH then
                local fWyQqD = uRlTiu.daCZQE:QSqCcR("HumanoidRootPart")
                local cwrBWS = uRlTiu.daCZQE:QSqCcR("Humanoid")
                if fWyQqD and cwrBWS then
                    local QanqVm = cwrBWS.zqJpNA
                    local pLCEVf = fWyQqD.idJNIm
                    local CBiguo = PhXTDe.iBJhxs(QanqVm.wzPfRN * dIaOvZ, pLCEVf.EoWjoq, QanqVm.MzNsJZ * dIaOvZ)
                    fWyQqD.idJNIm = pLCEVf:PKGAyo(CBiguo, 0.2)
                end
            end
        end)
        ELhfsz.gXkSXs(IvJsQW, YqiBAs)
    end
end)

XPEDFT:hWcAFY("Speed Value", "Adjust speed value", 500, 1, function(ZbknlD)
    dIaOvZ = ZbknlD
end, 1)

-- lOzUPI vyFTgQ hdziMr mZHdvn vnTejn
fibKsU:bIgCRu("Flight Toggle", "Toggle flight with key", piuuSA.UFikRb.wfpKvH, function()
    itJGyF = not itJGyF
    if itJGyF then
        local DdkvJs = uRlTiu.daCZQE
        if DdkvJs then
            local cwrBWS = DdkvJs:ivlhlQ("Humanoid")
            local fWyQqD = DdkvJs:ivlhlQ("HumanoidRootPart")
            local zKpwZV = RunService.LeSSuw:zISuDi(function()
                if itJGyF then
                    local CBiguo = PhXTDe.iBJhxs(0, 0, 0)
                    if UserInputService:LKJZtq(piuuSA.UFikRb.NOKNNV) then
                        CBiguo = CBiguo + (tlKygF.sBDeoM.yBKUvv * ZvupQt)
                    end
                    if UserInputService:LKJZtq(piuuSA.UFikRb.TgZpSo) then
                        CBiguo = CBiguo - (tlKygF.sBDeoM.yBKUvv * ZvupQt)
                    end
                    if UserInputService:LKJZtq(piuuSA.UFikRb.wQWFvt) then
                        CBiguo = CBiguo + (tlKygF.sBDeoM.yxUvyX * ZvupQt)
                    end
                    if UserInputService:LKJZtq(piuuSA.UFikRb.EaKHGQ) then
                        CBiguo = CBiguo - (tlKygF.sBDeoM.yxUvyX * ZvupQt)
                    end
                    if UserInputService:LKJZtq(piuuSA.UFikRb.jWymMv) then
                        CBiguo = CBiguo + PhXTDe.iBJhxs(0, ZvupQt, 0)
                    end
                    if UserInputService:LKJZtq(piuuSA.UFikRb.LxgYdX) then
                        CBiguo = CBiguo - PhXTDe.iBJhxs(0, ZvupQt, 0)
                    end
                    fWyQqD.idJNIm = fWyQqD.idJNIm:PKGAyo(CBiguo, 0.1)
                end
            end)
            ELhfsz.gXkSXs(IvJsQW, zKpwZV)
        end
    end
end)

fibKsU:hWcAFY("Flight Speed", "Adjust flight speed", 500, 1, function(ZbknlD)
    ZvupQt = ZbknlD
end)

-- FmfNJs BmqYdj mMRidG jBLJyR zPDOWd and YBnwtR for hHHnzp KmAEAk bruRCE
LIyDQL:XpItGn("NoClip", "Phase through objects", function(bqdsLi)
    GLntCO = bqdsLi
    if GLntCO then
        RunService:zPDOWd("NoClip", 100, function()
            if uRlTiu.daCZQE then
                for tYytMP, CkQVyG in wevYQn(uRlTiu.daCZQE:oeqsSL()) do
                    if CkQVyG:KCkPht("BasePart") then
                        CkQVyG.aaSYYo = false
                    end
                end
            end
        end)
    else
        RunService:YBnwtR("NoClip")
    end
end)

local function iUkkUi()
    if uRlTiu.daCZQE then
        local uYakYX = uRlTiu.daCZQE:ivlhlQ("Humanoid")
        local Swjmrh = uRlTiu.daCZQE:ivlhlQ("HumanoidRootPart")
        local xOWjmU = uYakYX.GzBpcu:zISuDi(function(tYytMP, iBJhxs)
            if iBJhxs == piuuSA.gmiWUI.GhGneY then
                YjXbFE.JrKBjH()
                uYakYX.wDNVYK = uYakYX.wDNVYK
            end
        end)
        ELhfsz.gXkSXs(IvJsQW, xOWjmU)
        local ACNAGa = uYakYX.wDNVYK
        local ldBNZw = uYakYX:QTNMoZ("Health"):zISuDi(function()
            if uYakYX.wDNVYK < ACNAGa then
                local LbGnpI = Swjmrh.idJNIm
                if LbGnpI.EoWjoq < -50 then
                    uYakYX.wDNVYK = ACNAGa
                end
            end
            ACNAGa = uYakYX.wDNVYK
        end)
        ELhfsz.gXkSXs(IvJsQW, ldBNZw)
    end
end

LIyDQL:XpItGn("No Fall Damage", "Prevents fall damage smoothly", function(bqdsLi)
    if bqdsLi then
        iUkkUi()
    end
end)

WsVXyz:bIgCRu("Dash", "Press to dash", piuuSA.UFikRb.vMtqIW, function()
    if not YZmCiw and uRlTiu.daCZQE then
        YZmCiw = true
        local Swjmrh = uRlTiu.daCZQE:QSqCcR("HumanoidRootPart")
        if Swjmrh then
            local rQsqJl = nRhHHR.iBJhxs("BodyVelocity")
            rQsqJl.Scgubj = PhXTDe.iBJhxs(xmSVVy.BMvMZz, xmSVVy.BMvMZz, xmSVVy.BMvMZz)
            rQsqJl.idJNIm = tlKygF.sBDeoM.yBKUvv * TxvmCT
            rQsqJl.PNyhMf = Swjmrh
            game:zUwpaQ("Debris"):MVRoxc(rQsqJl, 0.2)
            YjXbFE.JrKBjH(1)
            YZmCiw = false
        end
    end
end)

WsVXyz:hWcAFY("Dash Force", "Adjust dash force", 500, 50, function(ZbknlD)
    TxvmCT = ZbknlD
end)

-- nRNbkS TlppAu for PKuOzI
local ReiCrs = nYYbnJ:noKKVg("Visual")
local FzdgAF = ReiCrs:WeEVJk("ESP")

local function ClrxHY(KvEINq)
    local deGeXU = nRhHHR.iBJhxs("BillboardGui")
    deGeXU.LNRvoQ = "NameESP"
    deGeXU.ANfVLa = jAVCEe.iBJhxs(0, 200, 0, 50)
    deGeXU.IPGRdJ = true
    deGeXU.UDxRlg = PhXTDe.iBJhxs(0, 2, 0)
    local KyZckR = nRhHHR.iBJhxs("TextLabel")
    KyZckR.LNRvoQ = "PlayerName"
    KyZckR.AkFixx = 1
    KyZckR.ANfVLa = jAVCEe.iBJhxs(1, 0, 0, 20)
    KyZckR.BuvyQT = piuuSA.BuvyQT.nJJVvc
    KyZckR.WaITBB = zvRLVb.iBJhxs(1, 1, 1)
    KyZckR.bpeqMI = 14
    KyZckR.mxGsre = KvEINq.LNRvoQ
    KyZckR.PNyhMf = deGeXU
    return deGeXU
end

local function NLJozi()
    while ifMeCY do
        for tYytMP, KvEINq in lZqsNl(Players:JvaBdJ()) do
            if KvEINq ~= uRlTiu then
                if KvEINq.daCZQE and KvEINq.daCZQE:QSqCcR("Head") then
                    if uLnZFy[KvEINq] then
                        if not KvEINq.daCZQE.WwfuMz:QSqCcR("NameESP") then
                            local lDtFIh = ClrxHY(KvEINq)
                            uLnZFy[KvEINq] = lDtFIh
                            lDtFIh.PNyhMf = KvEINq.daCZQE.WwfuMz
                        end
                    end
                    if KvEINq.daCZQE:QSqCcR("Humanoid") then
                        local BawlpP = KvEINq.daCZQE:QSqCcR("ESP_Highlight")
                        if BawlpP then
                            local jQrHVM = KvEINq.daCZQE.uYakYX.wDNVYK
                            local ffTybe = KvEINq.daCZQE.uYakYX.ywxpJA
                            local wTaBWy = jQrHVM / ffTybe
                            BawlpP.UZNgpJ = zvRLVb.iBJhxs(1 - wTaBWy, wTaBWy, 0)
                        end
                    end
                    if PIGhHx[KvEINq] then
                        if not KvEINq.daCZQE:QSqCcR("Highlight") then
                            local BawlpP = nRhHHR.iBJhxs("Highlight")
                            BawlpP.kedVAm = 0.5
                            BawlpP.nmfUEU = 0
                            BawlpP.UZNgpJ = QnwMSm
                            BawlpP.eGQtfZ = zvRLVb.iBJhxs(1, 1, 1)
                            BawlpP.PNyhMf = KvEINq.daCZQE
                            PIGhHx[KvEINq] = BawlpP
                        end
                    end
                end
            end
        end
        YjXbFE.JrKBjH(0.1)
    end
end

FzdgAF:XpItGn("Name ESP", "Shows player names", function(bqdsLi)
    if bqdsLi then
        for tYytMP, KvEINq in lZqsNl(Players:JvaBdJ()) do
            if KvEINq ~= uRlTiu and KvEINq.daCZQE then
                local lDtFIh = ClrxHY(KvEINq)
                uLnZFy[KvEINq] = lDtFIh
                lDtFIh.PNyhMf = KvEINq.daCZQE:ivlhlQ("Head")
            end
        end
    else
        for tYytMP, lDtFIh in wevYQn(uLnZFy) do
            lDtFIh:sReCWu()
        end
        uLnZFy = {}
    end
end)

FzdgAF:XpItGn("Health ESP", "Shows health-based highlights", function(bqdsLi)
    if bqdsLi then
        for tYytMP, KvEINq in lZqsNl(Players:JvaBdJ()) do
            if KvEINq ~= uRlTiu and KvEINq.daCZQE then
                local BawlpP = nRhHHR.iBJhxs("Highlight")
                BawlpP.LNRvoQ = "ESP_Highlight"
                BawlpP.PNyhMf = KvEINq.daCZQE
            end
        end
    else
        for tYytMP, KvEINq in lZqsNl(Players:JvaBdJ()) do
            if KvEINq.daCZQE then
                local BawlpP = KvEINq.daCZQE:QSqCcR("ESP_Highlight")
                if BawlpP then BawlpP:sReCWu() end
            end
        end
    end
end)

FzdgAF:qpLBTI("ESP Color", "Pick custom ESP color", zvRLVb.iBJhxs(1, 0, 0), function(mdEGHR)
    QnwMSm = mdEGHR
    for tYytMP, BawlpP in wevYQn(PIGhHx) do
        BawlpP.UZNgpJ = mdEGHR
    end
end)

FzdgAF:XpItGn("Custom ESP", "Shows custom color highlights", function(bqdsLi)
    if bqdsLi then
        for tYytMP, KvEINq in lZqsNl(Players:JvaBdJ()) do
            if KvEINq ~= uRlTiu and KvEINq.daCZQE then
                local BawlpP = nRhHHR.iBJhxs("Highlight")
                BawlpP.kedVAm = 0.5
                BawlpP.nmfUEU = 0
                BawlpP.UZNgpJ = QnwMSm
                BawlpP.eGQtfZ = zvRLVb.iBJhxs(1, 1, 1)
                BawlpP.PNyhMf = KvEINq.daCZQE
                PIGhHx[KvEINq] = BawlpP
            end
        end
    else
        for tYytMP, BawlpP in wevYQn(PIGhHx) do
            BawlpP:sReCWu()
        end
        PIGhHx = {}
    end
end)

FzdgAF:XpItGn("Stop ESP Updates", "Stops all ESP updates", function(bqdsLi)
    ifMeCY = not bqdsLi
    if ifMeCY then
        YjXbFE.uZfsCL(NLJozi)
    end
end)

-- EVKoyS TlppAu
local waOQLR = nYYbnJ:noKKVg("Settings")
local GNeRRm = waOQLR:WeEVJk("GUI Settings")

GNeRRm:RCIElx("Theme", "Change UI Theme", {
    "DarkTheme",
    "LightTheme",
    "BloodTheme",
    "GrapeTheme",
    "Ocean",
    "Midnight",
    "Sentinel",
    "Synapse"
}, function(SJuYeW)
    FtlZpS:UtQiKl(SJuYeW)
end)

GNeRRm:bIgCRu("Toggle GUI", "Shows/Hides the GUI", piuuSA.UFikRb.xREYTJ, function()
    FtlZpS:ASgChD()
end)

local function RQJUzs()
    for tYytMP, kMSMOZ in lZqsNl(IvJsQW) do
        vWtBIt(function() kMSMOZ:TTTcUs() end)
    end
    IvJsQW = {}
    ifMeCY = false
    for tYytMP, lDtFIh in wevYQn(uLnZFy) do
        if lDtFIh and lDtFIh.sReCWu then
            vWtBIt(function() lDtFIh:sReCWu() end)
        end
    end
    uLnZFy = {}
    for tYytMP, BawlpP in wevYQn(PIGhHx) do
        if BawlpP and BawlpP.sReCWu then
            vWtBIt(function() BawlpP:sReCWu() end)
        end
    end
    PIGhHx = {}
    if nYYbnJ and nYYbnJ.sReCWu then
        vWtBIt(function() nYYbnJ:sReCWu() end)
    end
    print("Script unloaded successfully.")
end

GNeRRm:jQzwKF("Unload Script", "Unload all changes and close the GUI", RQJUzs)

YjXbFE.uZfsCL(NLJozi)

Players.RtXIRX:zISuDi(function(KvEINq)
    KvEINq.xbumQY:zISuDi(function(LtZqqV)
        if uLnZFy[KvEINq] then
            local lDtFIh = ClrxHY(KvEINq)
            uLnZFy[KvEINq] = lDtFIh
            lDtFIh.PNyhMf = LtZqqV:ivlhlQ("Head")
        end
    end)
end)

Players.MIyQuo:zISuDi(function(KvEINq)
    if uLnZFy[KvEINq] then
        vWtBIt(function() uLnZFy[KvEINq]:sReCWu() end)
        uLnZFy[KvEINq] = nil
    end
    if PIGhHx[KvEINq] then
        vWtBIt(function() PIGhHx[KvEINq]:sReCWu() end)
        PIGhHx[KvEINq] = nil
    end
end)
